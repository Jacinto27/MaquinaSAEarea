<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.165">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Andrés Gutiérrez">
<meta name="author" content="Stalyn Guerrero">
<meta name="dcterms.date" content="2023-02-26">

<title>Estimación de la tasa de informalidad en República Dominicana empleando modelos de área con transformación arcoseno</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="06 Gráfico de BENCH_files/libs/clipboard/clipboard.min.js"></script>
<script src="06 Gráfico de BENCH_files/libs/quarto-html/quarto.js"></script>
<script src="06 Gráfico de BENCH_files/libs/quarto-html/popper.min.js"></script>
<script src="06 Gráfico de BENCH_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="06 Gráfico de BENCH_files/libs/quarto-html/anchor.min.js"></script>
<link href="06 Gráfico de BENCH_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="06 Gráfico de BENCH_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="06 Gráfico de BENCH_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="06 Gráfico de BENCH_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="06 Gráfico de BENCH_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

<script src="06 Gráfico de BENCH_files/libs/kePrint-0.0.1/kePrint.js"></script>
<link href="06 Gráfico de BENCH_files/libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="06 Gráfico de BENCH_files/libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="06 Gráfico de BENCH_files/libs/plotly-binding-4.10.0/plotly.js"></script>
<script src="06 Gráfico de BENCH_files/libs/typedarray-0.1/typedarray.min.js"></script>
<script src="06 Gráfico de BENCH_files/libs/jquery-3.5.1/jquery.min.js"></script>
<link href="06 Gráfico de BENCH_files/libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="06 Gráfico de BENCH_files/libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="06 Gráfico de BENCH_files/libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="06 Gráfico de BENCH_files/libs/plotly-main-2.5.1/plotly-latest.min.js"></script>


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Estimación de la tasa de informalidad en República Dominicana empleando modelos de área con transformación arcoseno</h1>
<p class="subtitle lead">Gráfico comparativo de las estimaciones.</p>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Authors</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    Andrés Gutiérrez 
  </div>
    <div class="quarto-title-meta-contents">
        <p class="affiliation">
            CEPAL - Unidad de Estadísticas Sociales
          </p>
      </div>
      <div class="quarto-title-meta-contents">
    Stalyn Guerrero 
  </div>
    <div class="quarto-title-meta-contents">
        <p class="affiliation">
            CEPAL - Unidad de Estadísticas Sociales
          </p>
      </div>
    </div>

<div class="quarto-title-meta">

      
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">February 26, 2023</p>
    </div>
  </div>
    
  </div>
  

</header>

<section id="lectura-de-librerías" class="level2">
<h2 class="anchored" data-anchor-id="lectura-de-librerías">Lectura de librerías</h2>
<div class="cell" data-hash="0Recursos/06/unnamed-chunk-1_72f3bae6265676eeee6e97af66cd6c09">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(forcats)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(survey)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(srvyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="lecturas-de-bases-de-datos." class="level2">
<h2 class="anchored" data-anchor-id="lecturas-de-bases-de-datos.">Lecturas de bases de datos.</h2>
<p>El bloque de código carga tres archivos de datos en R:</p>
<ul>
<li><code>encuestaDOM.Rds</code>: es utilizado para obtener las estimaciones directas de la región.</li>
<li><code>estimacionesPre.Rds</code>: contiene estimaciones previas, sin embargo solo son seleccionadas las columnas <code>id_region</code>, <code>id_dominio</code> y <code>W_i</code> que son útiles para la construcción del gráfico.</li>
<li><code>TablaFinal.Rds</code>: contiene las estimaciones directas, sintéticas, Fay Harriot y Fay Harriot con benchmarking. Primero se carga el archivo y luego se realiza una unión interna (<code>inner_join()</code>) con el archivo <code>estimacionesPre</code> por la variable <code>id_dominio</code>.</li>
</ul>
<div class="cell" data-hash="0Recursos/06/unnamed-chunk-2_47d6dda7593ed3c20246808b0352c03e">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>encuestaDOM <span class="ot">&lt;-</span>  <span class="fu">readRDS</span>(<span class="st">"../Data/encuestaDOM.Rds"</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>estimacionesPre <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">'../Data/estimacionesBench.Rds'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(id_region, id_dominio, W_i)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>TablaFinal <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">'../Data/TablaFinal.Rds'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(estimacionesPre, <span class="at">by =</span> <span class="st">"id_dominio"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Este bloque de código calcula las estimaciones agregadas por región a partir de la tabla <code>TablaFinal</code>, que contiene las estimaciones sintéticas y de Fay Harriot para cada dominio, junto con su peso <code>W_i</code>. Primero, la tabla se agrupa por <code>id_region</code>. Luego, para cada región, se calcula la suma ponderada de las estimaciones sintéticas (<code>sintetico_back</code>) y de Fay Harriot (<code>FH_RBench</code> y <code>FayHerriot</code>) utilizando los pesos <code>W_i</code>. Las tres estimaciones se presentan en la tabla final <code>estimaciones_agregada</code>.</p>
<div class="cell" data-hash="0Recursos/06/unnamed-chunk-3_d7e5548f5b01b43b09178c23572d0ae4">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>estimaciones_agregada <span class="ot">&lt;-</span> TablaFinal <span class="sc">%&gt;%</span> <span class="fu">data.frame</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(id_region) <span class="sc">%&gt;%</span> </span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">Sintetico=</span><span class="fu">sum</span>(W_i<span class="sc">*</span>sintetico_back),</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">FH_bench=</span><span class="fu">sum</span>(W_i<span class="sc">*</span>FH_RBench),</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">FH =</span> <span class="fu">sum</span>(W_i<span class="sc">*</span>FayHerriot)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="fu">tba</span>(estimaciones_agregada)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<table class="table table-striped lightable-classic" style="width: auto !important; margin-left: auto; margin-right: auto; font-family: Arial Narrow; width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> id_region </th>
   <th style="text-align:right;"> Sintetico </th>
   <th style="text-align:right;"> FH_bench </th>
   <th style="text-align:right;"> FH </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> 01 </td>
   <td style="text-align:right;"> 0.4355 </td>
   <td style="text-align:right;"> 0.4331 </td>
   <td style="text-align:right;"> 0.4355 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 02 </td>
   <td style="text-align:right;"> 0.5340 </td>
   <td style="text-align:right;"> 0.5231 </td>
   <td style="text-align:right;"> 0.5339 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 03 </td>
   <td style="text-align:right;"> 0.5656 </td>
   <td style="text-align:right;"> 0.5566 </td>
   <td style="text-align:right;"> 0.5656 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 04 </td>
   <td style="text-align:right;"> 0.4791 </td>
   <td style="text-align:right;"> 0.4685 </td>
   <td style="text-align:right;"> 0.4791 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<p>En este bloque de código se realizan las siguientes acciones:</p>
<ul>
<li>Se agrega ceros a la izquierda de las variables <code>upm</code> y <code>estrato</code> para que tengan una longitud de 9 y 5 dígitos, respectivamente.</li>
<li>Se crea un objeto <code>disenoDOM</code> con el diseño de la encuesta, utilizando la función <code>as_survey_design()</code> de la librería survey. Se especifica que el estrato es la variable <code>estrato</code>, la unidad primaria de muestreo (UPM) es la variable <code>upm</code> y el peso muestral es la variable <code>factor_anual</code>. Además, se utiliza el argumento <code>nest=T</code> para indicar que las UPM están anidadas.</li>
<li>Se estima el indicador directo para cada región. Para ello, se agrupan <code>id_region</code> y se utiliza la función <code>summarise()</code> para calcular el tamaño de la muestra (<code>n</code>) y la razón de diseño (<code>Rd</code>) utilizando la función <code>survey_ratio()</code> de la librería <code>survey</code>.</li>
</ul>
<div class="cell" data-hash="0Recursos/06/unnamed-chunk-4_1999517f7c40345c2c587d56a8a93bb3">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>encuestaDOM <span class="ot">&lt;-</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  encuestaDOM <span class="sc">%&gt;%</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">upm =</span> <span class="fu">str_pad</span>(<span class="at">string =</span> upm,<span class="at">width =</span> <span class="dv">9</span>,<span class="at">pad =</span> <span class="st">"0"</span>),</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">estrato =</span> <span class="fu">str_pad</span>(<span class="at">string =</span> estrato,<span class="at">width =</span> <span class="dv">5</span>,<span class="at">pad =</span> <span class="st">"0"</span>),</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">factor_anual =</span> factor_expansion <span class="sc">/</span> <span class="dv">4</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="co">#Creación de objeto diseno--------------------------------------- </span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>disenoDOM <span class="ot">&lt;-</span> encuestaDOM <span class="sc">%&gt;%</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_survey_design</span>(</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">strata =</span> estrato,</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">ids =</span> upm,</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">weights =</span> factor_anual,</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">nest=</span>T</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a><span class="co">#Cálculo del indicador ----------------</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>indicador_dir <span class="ot">&lt;-</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>  disenoDOM <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(id_region) <span class="sc">%&gt;%</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(ocupado <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> pet <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">unweighted</span>(<span class="fu">n</span>()),</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">Rd =</span> <span class="fu">survey_ratio</span>(</span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>      <span class="at">numerator =</span> orden_sector <span class="sc">==</span> <span class="dv">2</span> ,</span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>      <span class="at">denominator =</span> <span class="dv">1</span>,</span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>      <span class="at">vartype =</span> <span class="fu">c</span>(<span class="st">"se"</span>, <span class="st">"ci"</span>),</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>      <span class="at">deff =</span> F</span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Este bloque de código realiza lo siguiente:</p>
<ul>
<li>Primero, se une el objeto estimaciones_agregada que contiene las estimaciones de los métodos sintético, FH benchmark y FH, con el objeto <code>indicador_dir</code> que contiene el indicador directo para cada región.</li>
<li>Luego, se seleccionan las columnas necesarias para el gráfico y se transforma el formato de las columnas usando la función<code>gather()</code> para tener los valores de las estimaciones en una sola columna y el nombre del método en otra columna. Además, se cambia el nombre de los métodos para que sean más descriptivos. Finalmente, se crean los límites del intervalo de confianza para el indicador directo y se guardan en el objeto <code>lims_IC</code>.</li>
</ul>
<div class="cell" data-hash="0Recursos/06/unnamed-chunk-5_e5090d89570a46953e9be473d41f7b3b">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>data_plot <span class="ot">&lt;-</span> <span class="fu">left_join</span>(estimaciones_agregada, </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>                       indicador_dir, <span class="at">by =</span> <span class="st">'id_region'</span>)  <span class="sc">%&gt;%</span> <span class="fu">data.frame</span>()</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>temp <span class="ot">&lt;-</span> data_plot <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>Rd_low, <span class="sc">-</span>Rd_upp,<span class="sc">-</span>Rd_se) <span class="sc">%&gt;%</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gather</span>(<span class="at">key =</span> <span class="st">"Estimacion"</span>,<span class="at">value =</span> <span class="st">"value"</span>, <span class="sc">-</span>n,<span class="sc">-</span>id_region) <span class="sc">%&gt;%</span> </span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Estimacion =</span> <span class="fu">case_when</span>(Estimacion <span class="sc">==</span> <span class="st">"FH"</span> <span class="sc">~</span> <span class="st">"Fay Harriot"</span>,</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>                                Estimacion <span class="sc">==</span> <span class="st">"FH_bench"</span> <span class="sc">~</span> <span class="st">"FH bench"</span>,</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>                                Estimacion <span class="sc">==</span> <span class="st">"Rd"</span><span class="sc">~</span> <span class="st">"Directo"</span>,</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>                                      <span class="cn">TRUE</span> <span class="sc">~</span> Estimacion))</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>lims_IC <span class="ot">&lt;-</span>  data_plot <span class="sc">%&gt;%</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(n,id_region,<span class="at">value =</span> Rd, Rd_low, Rd_upp) <span class="sc">%&gt;%</span> </span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Estimacion =</span> <span class="st">"Directo"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Este bloque de código grafica las estimaciones de los diferentes métodos, junto con los intervalos de confianza de las estimaciones directas. La función<code>ggplot()</code> de la librería <code>ggplot2</code> se utiliza para crear el gráfico, y se utilizan diferentes capas para agregar diferentes elementos al gráfico.</p>
<div class="cell" data-hash="0Recursos/06/unnamed-chunk-6_1b82d03d9faa8344e6f8690baf57b0cd">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(temp,</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>            <span class="fu">aes</span>(</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>              <span class="at">x =</span> <span class="fu">fct_reorder2</span>(id_region, id_region, n),</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">y =</span> value,</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>              <span class="at">shape =</span> Estimacion,</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>              <span class="at">color =</span> Estimacion</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>            )) <span class="sc">+</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> lims_IC,</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">ymin =</span> Rd_low ,</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">ymax =</span> Rd_upp, <span class="at">x =</span> id_region),</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">width =</span> <span class="fl">0.2</span>,</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">1</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>  )  <span class="sc">+</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">size =</span> <span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Región"</span>)</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(p)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="htmlwidget-a8f6ed550567a53bf52c" style="width:100%;height:464px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-a8f6ed550567a53bf52c">{"x":{"data":[{"x":[1,2,3,4],"y":[0.433065959562755,0.523064539343195,0.556554418885329,0.468528753635787],"text":["id_region: 01<br />value: 0.4330660<br />Estimacion: Directo<br />Estimacion: Directo<br />Rd_low: 0.4126795<br />Rd_upp: 0.4534524","id_region: 02<br />value: 0.5230645<br />Estimacion: Directo<br />Estimacion: Directo<br />Rd_low: 0.5041898<br />Rd_upp: 0.5419393","id_region: 03<br />value: 0.5565544<br />Estimacion: Directo<br />Estimacion: Directo<br />Rd_low: 0.5280040<br />Rd_upp: 0.5851048","id_region: 04<br />value: 0.4685288<br />Estimacion: Directo<br />Estimacion: Directo<br />Rd_low: 0.4349671<br />Rd_upp: 0.5020904"],"type":"scatter","mode":"lines","opacity":1,"line":{"color":"transparent"},"error_y":{"array":[0.0203864568185464,0.0188747405188321,0.0285503731928917,0.0335616296172846],"arrayminus":[0.0203864568185464,0.0188747405188321,0.0285503731928917,0.0335616296172846],"type":"data","width":21.3333333333334,"symmetric":false,"color":"rgba(248,118,109,1)"},"name":"Directo","legendgroup":"Directo","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1.07243905272335,1.68516351468861,2.92559559121728,4.15884301010519],"y":[0.433069670677755,0.523060923247728,0.556562785097339,0.468534624768171],"text":["fct_reorder2(id_region, id_region, n): 01<br />value: 0.4330660<br />Estimacion: Directo<br />Estimacion: Directo","fct_reorder2(id_region, id_region, n): 02<br />value: 0.5230645<br />Estimacion: Directo<br />Estimacion: Directo","fct_reorder2(id_region, id_region, n): 03<br />value: 0.5565544<br />Estimacion: Directo<br />Estimacion: Directo","fct_reorder2(id_region, id_region, n): 04<br />value: 0.4685288<br />Estimacion: Directo<br />Estimacion: Directo"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":11.3385826771654,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Directo","legendgroup":"Directo","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1.21337311174721,2.35385070443153,2.74330159761012,4.20729830209166],"y":[0.435529176771354,0.533890676889774,0.565614608474034,0.479098326862412],"text":["fct_reorder2(id_region, id_region, n): 01<br />value: 0.4355284<br />Estimacion: Fay Harriot<br />Estimacion: Fay Harriot","fct_reorder2(id_region, id_region, n): 02<br />value: 0.5338985<br />Estimacion: Fay Harriot<br />Estimacion: Fay Harriot","fct_reorder2(id_region, id_region, n): 03<br />value: 0.5656195<br />Estimacion: Fay Harriot<br />Estimacion: Fay Harriot","fct_reorder2(id_region, id_region, n): 04<br />value: 0.4790926<br />Estimacion: Fay Harriot<br />Estimacion: Fay Harriot"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(124,174,0,1)","opacity":1,"size":11.3385826771654,"symbol":"triangle-up","line":{"width":1.88976377952756,"color":"rgba(124,174,0,1)"}},"hoveron":"points","name":"Fay Harriot","legendgroup":"Fay Harriot","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1.06596514470875,2.00697435531765,2.83786249179393,4.24981634132564],"y":[0.433068627492551,0.523071705775085,0.556553957230552,0.46852030367213],"text":["fct_reorder2(id_region, id_region, n): 01<br />value: 0.4330660<br />Estimacion: FH bench<br />Estimacion: FH bench","fct_reorder2(id_region, id_region, n): 02<br />value: 0.5230645<br />Estimacion: FH bench<br />Estimacion: FH bench","fct_reorder2(id_region, id_region, n): 03<br />value: 0.5565544<br />Estimacion: FH bench<br />Estimacion: FH bench","fct_reorder2(id_region, id_region, n): 04<br />value: 0.4685288<br />Estimacion: FH bench<br />Estimacion: FH bench"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,191,196,1)","opacity":1,"size":11.3385826771654,"symbol":"square","line":{"width":1.88976377952756,"color":"rgba(0,191,196,1)"}},"hoveron":"points","name":"FH bench","legendgroup":"FH bench","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1.3076596993953,1.6800678787753,3.38538163043559,4.27443025428802],"y":[0.435501528119719,0.533955068121666,0.565577201759808,0.47914262442706],"text":["fct_reorder2(id_region, id_region, n): 01<br />value: 0.4355052<br />Estimacion: Sintetico<br />Estimacion: Sintetico","fct_reorder2(id_region, id_region, n): 02<br />value: 0.5339611<br />Estimacion: Sintetico<br />Estimacion: Sintetico","fct_reorder2(id_region, id_region, n): 03<br />value: 0.5655792<br />Estimacion: Sintetico<br />Estimacion: Sintetico","fct_reorder2(id_region, id_region, n): 04<br />value: 0.4791488<br />Estimacion: Sintetico<br />Estimacion: Sintetico"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(199,124,255,1)","opacity":1,"size":11.3385826771654,"symbol":"cross-thin-open","line":{"width":1.88976377952756,"color":"rgba(199,124,255,1)"}},"hoveron":"points","name":"Sintetico","legendgroup":"Sintetico","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.2283105022831,"r":7.30593607305936,"b":40.1826484018265,"l":48.9497716894977},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.4,4.6],"tickmode":"array","ticktext":["01","02","03","04"],"tickvals":[1,2,3,4],"categoryorder":"array","categoryarray":["01","02","03","04"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"Región","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.404058238277508,0.593726056544922],"tickmode":"array","ticktext":["0.45","0.50","0.55"],"tickvals":[0.45,0.5,0.55],"categoryorder":"array","categoryarray":["0.45","0.50","0.55"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"value","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(51,51,51,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"title":{"text":"Estimacion","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"121c2f3b25f8":{"x":{},"y":{},"shape":{},"colour":{},"ymin":{},"ymax":{},"type":"scatter"},"121c99918ed":{"x":{},"y":{},"shape":{},"colour":{}}},"cur_data":"121c2f3b25f8","visdat":{"121c2f3b25f8":["function (y) ","x"],"121c99918ed":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>La capa <code>aes()</code> define la estética de la gráfica. En este caso, se utiliza la variable <code>id_region</code> en el eje x, la variable <code>value</code> en el eje y, y se utiliza el color y la forma de los puntos para distinguir entre los diferentes métodos de estimación. Se utiliza la función <code>fct_reorder2()</code> para ordenar las regiones de manera ascendente según su tamaño muestral <code>n</code>.</p>
<p>La capa <code>geom_errorbar()</code> se utiliza para agregar los intervalos de confianza de las estimaciones directas. Se utiliza el conjunto de datos <code>lims_IC</code> que contiene los límites de los intervalos de confianza. Se utiliza <code>ymin</code> y <code>ymax</code> para definir los límites inferior y superior de las barras de error, respectivamente, y <code>x</code> para definir la ubicación en el eje x de cada intervalo.</p>
<p>La capa <code>geom_jitter()</code> se utiliza para agregar los puntos de las estimaciones de cada método, con un poco de ruido para que no se superpongan.</p>
<p>Finalmente, la capa <code>labs()</code> se utiliza para agregar etiquetas a los ejes del gráfico. En este caso, se utiliza <code>Región</code> para el eje x. El objeto p contiene el gráfico creado.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>